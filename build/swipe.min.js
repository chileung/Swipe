"use strict";function Swipe(a,b){function c(){l=t.children,p=l.length,m=new Array(p),n=a.getBoundingClientRect().width||a.offsetWidth,o=a.getBoundingClientRect().height||a.offsetHeight,s="vertical"===y?o:n;for(var b=p;b--;){var c=l[b];c.setAttribute("data-index",b),c.style.width=n+"px",c.style.height=o+"px",h(b,w>b?-s:b>w?s:0,0)}a.style.visibility="visible"}function d(){(b.continuous||w)&&g(w-1)}function e(){(b.continuous||p-1>w)&&g(w+1)}function f(a){return(p+a%p)%p}function g(a,c){if(w!==a){for(var d=Math.abs(w-a)/(w-a),e=Math.abs(w-a)-1;e--;)h(f((a>w?a:w)-e-1),d*s,0);a=f(a),h(w,d*s,c||x),h(a,0,c||x),w=a,b.callback&&b.callback(w,l[w])}}function h(a,b,c){i(a,b,c),a>=0&&a<m.length&&(m[a]=b)}function i(a,b,c){var d=l[a],e=d&&d.style;if(e){e.webkitTransitionDuration=e.transitionDuration=c+"ms";var f="horizontal"===y&&"translate("+b+"px, 0px)"||"vertical"===y&&"translate(0px, "+b+"px)";e.webkitTransform=f+"translateZ(0)"}}function j(){q=setTimeout(e,z)}function k(){z=0,clearTimeout(q)}if(a){var l,m,n,o,p,q,r,s,t=a.children[0],u={},v={};b=b||{};var w=parseInt(b.startSlide,10)||0,x=b.speed||300,y=b.direction||"horizontal";b.continuous=void 0!==b.continuous?b.continuous:!1;var z=b.auto||0,A={handleEvent:function(a){switch(a.type){case"touchstart":this.start(a);break;case"touchmove":this.move(a);break;case"touchend":this.end(a);break;case"webkitTransitionEnd":case"transitionend":this.transitionEnd(a);break;case"resize":c()}b.stopPropagation&&a.stopPropagation()},start:function(a){var b=a.touches[0];u={x:b.pageX,y:b.pageY,time:+new Date},v={},r=void 0,t.addEventListener("touchmove",this,!1),t.addEventListener("touchend",this,!1)},move:function(a){if(!(a.touches.length>1||a.scale&&1!==a.scale)){b.disableScroll&&a.preventDefault();var c=a.touches[0];if(v={x:c.pageX-u.x,y:c.pageY-u.y},"undefined"==typeof r&&(r=!!(Math.abs(v.x)>Math.abs(v.y)),"vertical"===y&&(r=!r)),r){a.preventDefault(),k(),"horizontal"===y?v.x=v.x/(!w&&v.x>0||w===p-1&&v.x<0?Math.abs(v.x)/n+1:1):"vertical"===y&&(v.y=v.y/(!w&&v.y>0||w===p-1&&v.y<0?Math.abs(v.y)/o+1:1));var d="horizontal"===y&&v.x||"vertical"===y&&v.y;i(w-1,d+m[w-1],0),i(w,d+m[w],0),i(w+1,d+m[w+1],0)}}},end:function(){var a,c=+new Date-u.time;"vertical"===y?a=Number(c)<250&&Math.abs(v.y)>20||Math.abs(v.y)>o/2:"horizontal"===y&&(a=Number(c)<250&&Math.abs(v.x)>20||Math.abs(v.x)>n/2);var d;if("vertical"===y?d=!w&&v.y>0||w===p-1&&v.y<0:"horizontal"===y&&(d=!w&&v.x>0||w===p-1&&v.x<0),r)if(a&&!d){var e;"vertical"===y?e=v.y<0:"horizontal"===y&&(e=v.x<0),e?(h(w-1,-s,0),h(w,m[w]-s,x),h(f(w+1),m[f(w+1)]-s,x),w=f(w+1)):(h(w+1,s,0),h(w,m[w]+s,x),h(f(w-1),m[f(w-1)]+s,x),w=f(w-1)),b.callback&&b.callback(w,l[w])}else h(w-1,-s,x),h(w,0,x),h(w+1,s,x);t.removeEventListener("touchmove",A,!1),t.removeEventListener("touchend",A,!1)},transitionEnd:function(a){parseInt(a.target.getAttribute("data-index"),10)===w&&(z&&j(),b.transitionEnd&&b.transitionEnd.call(a,w,l[w]))}};return t.addEventListener("touchstart",A,!1),t.addEventListener("webkitTransitionEnd",A,!1),t.addEventListener("transitionend",A,!1),window.addEventListener("resize",A,!1),c(),z&&j(),{setup:function(){c()},slide:function(a,b){k(),g(a,b)},prev:function(){k(),d()},next:function(){k(),e()},stop:function(){k()},getPos:function(){return w},getNumSlides:function(){return p},kill:function(){k();for(var a=p;a--;){var b=l[a];b.style.width="",b.style.height="",i(a,0,0)}t.removeEventListener("touchstart",A,!1),t.removeEventListener("webkitTransitionEnd",A,!1),t.removeEventListener("transitionend",A,!1),window.removeEventListener("resize",A,!1)}}}}(window.jQuery||window.Zepto)&&!function(a){a.fn.Swipe=function(b){return this.each(function(){a(this).data("Swipe",new Swipe(a(this)[0],b))})}}(window.jQuery||window.Zepto),"undefined"!=typeof module&&"object"==typeof exports?module.exports=Swipe:"function"==typeof define&&define.amd&&define([],Swipe);